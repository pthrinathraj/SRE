
# 2.7 Troubleshooting Scenarios â€“ In-Depth Guide

This section focuses on common networking issues, how to identify symptoms, commands to investigate, and actions to resolve problems. It includes real-world use cases and practical diagnostics.

---

## ğŸš« 1. No Internet Access

### ğŸ”¹ Symptoms:
- Canâ€™t browse any websites
- DNS resolution fails or ping fails

### ğŸ” Diagnosis:
```bash
ping 8.8.8.8
ping google.com
ip route show
ip addr show
```

### ğŸ› ï¸ Resolution:
- If `ping 8.8.8.8` works but not `google.com`, itâ€™s a **DNS issue** â†’ check `/etc/resolv.conf`
- If both fail, verify:
  - Interface is up (`ip link show`)
  - DHCP lease is valid
  - Default gateway exists

---

## ğŸ” 2. Intermittent Connectivity

### ğŸ”¹ Symptoms:
- Drops during SSH or VoIP
- High packet loss or fluctuating latency

### ğŸ” Diagnosis:
```bash
ping -c 100 8.8.8.8
mtr 8.8.8.8
```

### ğŸ› ï¸ Resolution:
- Look for high latency/jitter in `mtr`
- Check for interface flapping: `dmesg | grep eth`
- Replace cables or switch ports if needed

---

## ğŸ”„ 3. IP Address Issues

### ğŸ”¹ Symptoms:
- Self-assigned IP (`169.254.x.x`)
- Cannot reach gateway or internet

### ğŸ” Diagnosis:
```bash
ip addr show
cat /var/lib/dhcp/dhclient.leases
```

### ğŸ› ï¸ Resolution:
- Check DHCP with `sudo dhclient -v`
- Release/renew IP with `dhclient`
- Verify switch/router DHCP settings

---

## ğŸŒ 4. DNS Resolution Failures

### ğŸ”¹ Symptoms:
- Browsers say â€œDNS_PROBE_FINISHEDâ€
- Hostnames wonâ€™t resolve

### ğŸ” Diagnosis:
```bash
dig example.com
cat /etc/resolv.conf
```

### ğŸ› ï¸ Resolution:
- Change to public DNS (e.g., 1.1.1.1, 8.8.8.8)
- Restart resolver: `sudo systemctl restart systemd-resolved`

---

## ğŸ” 5. Port or Service Not Accessible

### ğŸ”¹ Symptoms:
- App cannot connect to service (e.g., SSH, HTTP)

### ğŸ” Diagnosis:
```bash
ss -tulnp
sudo iptables -L -n
sudo netstat -plant | grep :22
```

### ğŸ› ï¸ Resolution:
- Ensure service is listening
- Confirm firewall allows traffic
- Check `ufw` or `firewalld` rules

---

## âš™ï¸ 6. Duplex/Speed Mismatch

### ğŸ”¹ Symptoms:
- Sluggish performance on local network

### ğŸ” Diagnosis:
```bash
etstat -i
ethtool eth0
```

### ğŸ› ï¸ Resolution:
- Force duplex/speed: `ethtool -s eth0 speed 100 duplex full autoneg off`
- Replace cables or switches

---

## âœ… Summary Table

| Issue | Tool | Command | Resolution |
|-------|------|---------|------------|
| No internet | `ping` | `ping 8.8.8.8` | Check DNS/gateway/interface |
| DNS fail | `dig`, `cat` | `dig example.com` | Update resolv.conf or DNS server |
| DHCP fail | `dhclient` | `dhclient -v` | Renew IP, check DHCP service |
| Port closed | `ss`, `iptables` | `ss -tulnp` | Start service, open port |
| Interface flap | `dmesg`, `ethtool` | `dmesg | grep eth` | Replace cable/switch |

---

This concludes **2.7 â€“ Troubleshooting Scenarios**. Next: 2.8 â€“ NAT and Port Forwarding Labs.
